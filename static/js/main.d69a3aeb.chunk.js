(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{143:function(e,n,t){},144:function(e,n,t){"use strict";t.r(n);var r,a=t(0),o=t.n(a),c=t(21),u=t.n(c),i=t(1),s=t(2),l=t(22),p="https://api.ratesapi.io/api",d=["RUB","USD","EUR","GBP"];!function(e){e.RATES_REQUEST="RATES_REQUEST",e.RATES_REQUEST_SUCCESS="RATES_REQUEST_SUCCESS",e.RATES_REQUEST_FAILURE="RATES_REQUEST_FAILURE",e.SOURCE_CURRENCY_CHANGE="SOURCE_CURRENCY_CHANGE",e.TARGET_CURRENCY_CHANGE="TARGET_CURRENCY_CHANGE",e.POCKETS_EXCHANGE="POCKETS_EXCHANGE",e.ALERT_ADD="ALERT_ADD",e.ALERT_REMOVE="ALERT_REMOVE"}(r||(r={}));var f="UPDATE_RATES_FAILED",h=!1;function v(e){return function(n){return n({type:r.RATES_REQUEST,payload:{baseCurrency:e}}),fetch("".concat(p,"/latest?base=").concat(e)).then(function(e){return e.json()}).then(function(e){var n=e.rates,t=void 0===n?{}:n;return{RUB:t.RUB,EUR:t.EUR,USD:t.USD,GBP:t.GBP}}).then(function(t){var a;return h&&(n((a=f,{type:r.ALERT_REMOVE,payload:{id:a}})),h=!1),n({type:r.RATES_REQUEST_SUCCESS,payload:{rates:t,baseCurrency:e}})}).catch(function(){h=!0,n({type:r.RATES_REQUEST_FAILURE,payload:{baseCurrency:e}}),n(function(e){var n=e.id,t=e.message,a=e.repeatable,o=void 0===a||a;return{type:r.ALERT_ADD,payload:{id:n,message:t,repeatable:o}}}({id:f,message:"Failed to get exchange rates",repeatable:!1}))})}}var m,E=t(4),g=t(5),y=t(7),C=t(6),b=t(8);!function(e){e[e.Source=0]="Source",e[e.Target=1]="Target"}(m||(m={}));var S={RUB:"\u20bd",USD:"$",EUR:"\u20ac",GBP:"\xa3"},O={"as-is":{maximumFractionDigits:2},always:{minimumFractionDigits:2,maximumFractionDigits:2},none:{maximumFractionDigits:0}},A=function(e,n){var t=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).fractions,r=void 0===t?"as-is":t;return S[n]+e.toLocaleString(void 0,O[r])},R=t(52),j=t.n(R),x=t(23);function k(){var e=Object(i.a)(["\n    background: none;\n    border: none;\n    color: inherit;\n    font-size: inherit;\n    text-align: right;\n    outline: none;\n    min-width: 50px;\n    padding: 0;\n    margin: 0;\n\n    ::-ms-clear {\n      display: none;\n    }\n  "]);return k=function(){return e},e}var T=function(e){return e(k())},U=function(){},_=function(e){function n(){var e,t;Object(E.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=Object(y.a)(this,(e=Object(C.a)(n)).call.apply(e,[this].concat(a)))).handleChange=function(e){var n=e.value,r=t.props,a=r.name,o=r.prefix,c="-"===o?n.slice(o.length):n;+c!==(t.props.value?+t.props.value:0)&&t.props.onChange(null,{value:c,name:a})},t}return Object(b.a)(n,e),Object(g.a)(n,[{key:"render",value:function(){var e=this,n=this.props,t=n.prefix,r=n.name,a=n.value,c=n.getRef;return o.a.createElement(x.a,null,function(n){var u=n.css;return o.a.createElement(j.a,{getInputRef:c,className:T(u),decimalScale:2,allowNegative:!1,maxLength:14,name:r,autoComplete:"off",thousandSeparator:!0,prefix:t,value:a||"",onValueChange:e.handleChange})})}}]),n}(a.PureComponent);_.defaultProps={onChange:U,getRef:U};var w=_,D="rgba(0, 0, 0, 0.25)",N="#3f90ea",P="#337dce",B="#eb008d",L="#d2007e",F="#CA0076",G="#cd0a2c";function I(){var e=Object(i.a)(["\n  margin-top: 10px;\n  font-size: 12px;\n  color: white;\n  opacity: 0.7;\n"]);return I=function(){return e},e}function M(){var e=Object(i.a)(["\n  box-sizing: border-box;\n  padding: 40px 50px 46px;\n  display: flex;\n  flex-wrap: wrap;\n  font-size: 26px;\n  color: white;\n"]);return M=function(){return e},e}function Q(){var e=Object(i.a)(["\n  display: flex;\n  width: 100%;\n  justify-content: space-between;\n  align-items: center;\n"]);return Q=function(){return e},e}var H=s.a.div(Q()),V=s.a.div(M()),z=s.a.div(function(e){return e.type===m.Source?"\n        background-color: ".concat(N,";\n        position: relative;\n        \n        &:after {\n          content: '';\n          display: block;\n          position: absolute;\n          left: 50%;\n          top: 100%;\n          transform: translate(-50%, -50%) rotate(45deg);\n          width: 20px;\n          height: 20px;\n          background-color: inherit;\n        }\n        "):"\n          background-color: ".concat(P,";\n        ")}),X=s.a.div(I()),Y=t(53),K=t.n(Y);t(80),t(81),t(82);function J(){var e=Object(i.a)(["\n  outline: none !important;\n"]);return J=function(){return e},e}var q=s.a.div(J()),W=function(e){function n(){var e,t;Object(E.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=Object(y.a)(this,(e=Object(C.a)(n)).call.apply(e,[this].concat(a)))).slider=void 0,t.scrollBlock=void 0,t.refSlider=function(e){t.slider=e},t.refScrollBlock=function(e){e&&(t.scrollBlock=e.querySelector(".slick-list"))},t.handleChange=function(e){t.scrollBlock&&(t.scrollBlock.scrollLeft=0),t.props.onSlide(e)},t}return Object(b.a)(n,e),Object(g.a)(n,[{key:"componentDidUpdate",value:function(e){var n=this.props.currentSlide;this.props.currentSlide!==e.currentSlide&&this.slider&&this.slider.slickGoTo(n)}},{key:"render",value:function(){var e=this.props,n=e.currentSlide,t=e.children,r=e.speed;return o.a.createElement("div",{ref:this.refScrollBlock},o.a.createElement(K.a,{ref:this.refSlider,dots:!0,arrows:!0,speed:r,initialSlide:n,infinite:!1,afterChange:this.handleChange},o.a.Children.map(t,function(e){return o.a.createElement(q,null,e)})))}}]),n}(a.PureComponent);W.defaultProps={onSlide:U,currentSlide:0,speed:250};var $=W,Z=t(29),ee=t.n(Z),ne=function(e){function n(){var e,t;Object(E.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(t=Object(y.a)(this,(e=Object(C.a)(n)).call.apply(e,[this].concat(a)))).inputRefs={},t.handleSlideClick=function(e){t.focusInput(e.currentTarget.dataset.currency)},t.handleSlide=function(e){var n=t.props.type,r=d[e];t.props.onCurrencyChange(n,r),r!==t.props.currency&&t.focusInput(r)},t.setInputRef=ee()(function(e){return function(n){t.inputRefs[e]=n}},{primitive:!0}),t.renderSlide=function(e){var n=t.props,r=n.pockets,a=n.type,c=n.inputValue,u=n.onAmountChange,i=n.valueFieldName,s=n.extraContent;return o.a.createElement(V,{key:e,"data-currency":e,onClick:t.handleSlideClick},o.a.createElement(H,null,o.a.createElement("div",null,e),o.a.createElement(w,{getRef:t.setInputRef(e),prefix:a===m.Source?"-":"+",name:i,value:c,onChange:u})),o.a.createElement(H,null,o.a.createElement(X,null,"You have\xa0",A(r[e],e,{fractions:"always"})),o.a.createElement(X,null,s)))},t}return Object(b.a)(n,e),Object(g.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,n=e.type,t=e.currency;n===m.Source&&this.focusInput(t)}},{key:"focusInput",value:function(e){var n=this.inputRefs[e];n&&n.focus()}},{key:"render",value:function(){var e=this.props,n=e.currency,t=e.type;return o.a.createElement(z,{type:t},o.a.createElement($,{currentSlide:d.indexOf(n),onSlide:this.handleSlide},d.map(this.renderSlide)))}}]),n}(a.PureComponent);ne.defaultProps={onCurrencyChange:U};var te=ne;function re(){var e=Object(i.a)(["\n  margin-top: 8px;\n  min-height: 14px;\n  font-size: 14px;\n  text-align: center;\n  color: ",";\n"]);return re=function(){return e},e}function ae(){var e=Object(i.a)(["\n  border-radius: 6px;\n  overflow: hidden;\n  box-shadow: 0 24px 32px ",";\n"]);return ae=function(){return e},e}var oe=s.a.div(ae(),D),ce=s.a.div(re(),G);function ue(){var e=Object(i.a)(["\n  transition: opacity ","\n    ease-in-out;\n  transition-delay: ",";\n  opacity: ",";\n"]);return ue=function(){return e},e}function ie(){var e=Object(i.a)(["\n  width: 24px;\n  height: 24px;\n  stroke: currentColor;\n  fill: currentColor;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transition: all 0.225s ease-in-out;\n  transform: translate(-50%, -50%) scale(",");\n  transition-delay: ",";\n  opacity: ",";\n"]);return ie=function(){return e},e}function se(){var e=Object(i.a)(["\n  margin: 20px auto 0;\n  display: block;\n  border-radius: 40px;\n  height: 46px;\n  width: 160px;\n  font-size: 18px;\n  border: none;\n  text-align: center;\n  background-color: ",";\n  color: white;\n  transition: all 0.25s ease;\n  cursor: pointer;\n  outline: none;\n  position: relative;\n\n  :disabled {\n    opacity: ",";\n    pointer-events: none;\n  }\n\n  :hover {\n    background-color: ",";\n  }\n\n  :active {\n    background-color: ",";\n  }\n"]);return se=function(){return e},e}var le=s.a.button(se(),B,function(e){return e.success?1:.25},L,F),pe=s.a.svg(ie(),function(e){return e.success?1:0},function(e){return e.success?"0.1s":0},function(e){return e.success?1:0}),de=s.a.span(ue(),function(e){return e.success?".15s":"0.3s"},function(e){return e.success?0:"0.28s"},function(e){return e.success?0:1}),fe=function(e){function n(){var e,t;Object(E.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=Object(y.a)(this,(e=Object(C.a)(n)).call.apply(e,[this].concat(a)))).state={success:!1},t.timer=void 0,t.handleClick=function(e){clearTimeout(t.timer),t.setState({success:!0}),t.timer=window.setTimeout(function(){t.setState({success:!1})},800),t.props.onClick(e)},t}return Object(b.a)(n,e),Object(g.a)(n,[{key:"render",value:function(){var e=this.props,n=e.disabled,t=e.children,r=this.state.success;return o.a.createElement(le,{success:r,disabled:n,onClick:this.handleClick},o.a.createElement(de,{success:r},t),o.a.createElement(pe,{success:r,viewBox:"0 0 24 24"},o.a.createElement("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})))}}]),n}(a.PureComponent);fe.defaultProps={onClick:U};var he=fe;var ve=function(e,n){var t=e,r=0;if(e){for(;r<n.length;){if(null==t)return;t=t[n[r]],r+=1}return t}},me=function(e){function n(){return Object(E.a)(this,n),Object(y.a)(this,Object(C.a)(n).apply(this,arguments))}return Object(b.a)(n,e),Object(g.a)(n,[{key:"render",value:function(){var e=this.props,n=e.pockets,t=e.sourceCurrency,r=e.targetCurrency,a=e.sourceAmount,c=e.targetAmount,u=e.rates,i=e.onCurrencyChange,s=e.onAmountChange,l=e.onSubmit,p=e.valid,d=e.errorMsg,f=ve(u,[t,r]);return o.a.createElement("div",null,o.a.createElement(oe,null,o.a.createElement(te,{valueFieldName:"sourceAmount",type:m.Source,pockets:n,currency:t,inputValue:a,onCurrencyChange:i,onAmountChange:s}),o.a.createElement(te,{valueFieldName:"targetAmount",type:m.Target,pockets:n,currency:r,inputValue:c,onCurrencyChange:i,onAmountChange:s,extraContent:!!f&&"".concat(A(1,r)," = ").concat(A(1/f,t))})),o.a.createElement(he,{disabled:!p,onClick:l},"Exchange"),o.a.createElement(ce,null,d))}}]),n}(o.a.PureComponent),Ee=t(3);var ge=function(e){return"targetAmount"===e?"sourceAmount":"targetAmount"},ye={sourceCurrency:"RUB",targetCurrency:"EUR"},Ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye;return function(n){var t=function(t){function r(){var n,t;Object(E.a)(this,r);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(t=Object(y.a)(this,(n=Object(C.a)(r)).call.apply(n,[this].concat(o)))).state=e,t.updateTimer=void 0,t.handleCurrencyChange=function(e,n){var r=e===m.Source?"sourceCurrency":"targetCurrency",a=e===m.Source?"targetCurrency":"sourceCurrency",o=t.state[r];t.setState(Object(Ee.a)({},r,n)),t.props.updateRates(n);var c=t.state[a];c===n&&t.setState(Object(Ee.a)({},a,function(e,n){var t=d.indexOf(e),r=t>d.indexOf(n)?-1:1;return d[(d.length+t+r)%d.length]}(c,o)))},t.handleAmountChange=function(e,n){var r,a=n.value,o=n.name;o&&t.setState((r={},Object(Ee.a)(r,o,a.length?+a:void 0),Object(Ee.a)(r,"lastUpdatedField",o),r),function(){t.calcAmount(ge(o))})},t.handleSubmit=function(){var e=t.state,n=e.sourceCurrency,r=e.targetCurrency,a=e.sourceAmount,o=e.targetAmount;t.props.onExchange(n,a||0,r,o||0),t.setState({sourceAmount:null,targetAmount:null})},t.validate=ee()(function(e,n,t,r){return t&&r?t>n[e]?{valid:!1,errorMsg:"Not enough money"}:{valid:!0}:{valid:!1}},{max:1}),t}return Object(b.a)(r,t),Object(g.a)(r,[{key:"componentDidMount",value:function(){var e=this;this.props.updateRates(this.state.sourceCurrency),this.updateTimer=window.setInterval(function(){return e.props.updateRates(e.state.sourceCurrency)},1e4)}},{key:"componentWillUnmount",value:function(){clearInterval(this.updateTimer)}},{key:"componentDidUpdate",value:function(e){var n=this.state.lastUpdatedField;this.props.rates!==e.rates&&n&&this.calcAmount(ge(n))}},{key:"calcAmount",value:function(e){var n,t=this.props.rates,r=this.state,a=r.sourceCurrency,o=r.targetCurrency,c=this.state[ge(e)],u=ve(t,[a,o]);if(u&&c){var i="sourceAmount"===e?1/u:u;n=Math.round(c*i*100)/100}else n=null;this.setState(Object(Ee.a)({},e,n))}},{key:"render",value:function(){var e=this.props.pockets,t=this.state,r=t.sourceCurrency,a=t.sourceAmount,c=t.targetAmount;return o.a.createElement(n,Object.assign({},this.props,this.validate(r,e,a,c),{sourceAmount:this.state.sourceAmount,targetAmount:this.state.targetAmount,sourceCurrency:this.state.sourceCurrency,targetCurrency:this.state.targetCurrency,onAmountChange:this.handleAmountChange,onCurrencyChange:this.handleCurrencyChange,onSubmit:this.handleSubmit}))}}]),r}(a.Component);return t.displayName="FormStateHOC(".concat(n.displayName||n.name||"Component",")"),t}},be=Object(l.b)(function(e){return{pockets:e.pockets,rates:e.rates}},function(e){return{onExchange:function(n,t,a,o){e(function(e,n,t,a){return{type:r.POCKETS_EXCHANGE,payload:{sourceCurrency:e,sourceAmount:n,targetCurrency:t,targetAmount:a}}}(n,t,a,o))},updateRates:function(n){return e(v(n))}}})(Ce()(me)),Se=t(13),Oe=t(54),Ae=t(18),Re={};var je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Re,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case r.RATES_REQUEST_SUCCESS:var t=n.payload,a=t.rates,o=t.baseCurrency;return Object(Ae.a)({},e,Object(Ee.a)({},o,a));case r.RATES_REQUEST_FAILURE:return Object(Ae.a)({},e,Object(Ee.a)({},n.payload.baseCurrency,{}));default:return e}},xe={RUB:1000500.34,USD:800.7,EUR:600,GBP:70.5};var ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xe,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case r.POCKETS_EXCHANGE:var t,a=n.payload,o=a.sourceCurrency,c=a.sourceAmount,u=a.targetCurrency,i=a.targetAmount;return Object(Ae.a)({},e,(t={},Object(Ee.a)(t,o,e[o]-c),Object(Ee.a)(t,u,e[u]+i),t));default:return e}},Te={},Ue=function(e,n){return Object.keys(e).reduce(function(t,r){return e[r].id!==n.id&&(t[r]=e[r]),t},{})};var _e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Te,n=arguments.length>1?arguments[1]:void 0,t=Object.keys(e),a=+t[t.length-1]+1||0;switch(n.type){case r.ALERT_ADD:var o=n.payload.repeatable?Object(Ae.a)({},e):Ue(e,n.payload);return o[a++]=n.payload,o;case r.ALERT_REMOVE:return Ue(e,n.payload);default:return e}},we=Object(Se.c)({rates:je,pockets:ke,alerts:_e}),De=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Se.d,Ne=Object(Se.e)(we,De(Object(Se.a)(Oe.a)));function Pe(){var e=Object(i.a)(["\n  margin-top: 2px;\n"]);return Pe=function(){return e},e}function Be(){var e=Object(i.a)(["\n  margin-bottom: 8px;\n  font-size: 13px;\n  height: 45px;\n  color: ",";\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: flex-end;\n"]);return Be=function(){return e},e}var Le=s.a.div(Be(),G),Fe=s.a.div(Pe()),Ge=function(e){var n=e.alerts;return o.a.createElement(Le,null,!!n&&n.slice(-3).map(function(e,n){var t=e.message;return o.a.createElement(Fe,{key:n},"\u26a0\ufe0f ",t)}))},Ie=Object(l.b)(function(e){var n=e.alerts;return{alerts:n?Object.values(n):void 0}})(Ge);function Me(){var e=Object(i.a)(["\n  max-width: 440px;\n  width: 100%;\n"]);return Me=function(){return e},e}function Qe(){var e=Object(i.a)(["\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 6px;\n"]);return Qe=function(){return e},e}var He=s.a.div(Qe()),Ve=s.a.div(Me()),ze=function(){return o.a.createElement(l.a,{store:Ne},o.a.createElement(He,null,o.a.createElement(Ve,null,o.a.createElement(Ie,null),o.a.createElement(be,null))))};t(142),t(143);u.a.render(o.a.createElement(ze,null),document.getElementById("root"))},55:function(e,n,t){e.exports=t(144)},82:function(e,n,t){}},[[55,1,2]]]);
//# sourceMappingURL=main.d69a3aeb.chunk.js.map